---
networks:
  default:
    name: "eos"
services:
  eos:
    image: "akkudoktor/eos:${EOS_VERSION}"
    read_only: true
    build:
      context: .
      dockerfile: "Dockerfile"
      args:
        PYTHON_VERSION: "${PYTHON_VERSION}"
        BASE_IMAGE: "${BASE_IMAGE}"
        IMAGE_SUFFIX: "${IMAGE_SUFFIX}"
        APT_PACKAGES: "${APT_PACKAGES:-}"
        APT_BUILD_PACKAGES: "${APT_BUILD_PACKAGES:-}"
        PIP_EXTRA_INDEX_URL: "${PIP_EXTRA_INDEX_URL:-}"
        RUSTUP_INSTALL: "${RUSTUP_INSTALL:-}"
    env_file:
      - .env
    environment:
      - EOS_CONFIG_DIR=config
      - EOS_SERVER__EOSDASH_SESSKEY=s3cr3t
      - EOS_PREDICTION__LATITUDE=52.2
      - EOS_PREDICTION__LONGITUDE=13.4
      - EOS_ELECPRICE__PROVIDER=ElecPriceAkkudoktor
      - EOS_ELECPRICE__CHARGES_KWH=0.21
    ports:
      - "${EOS_SERVER__PORT}:${EOS_SERVER__PORT}"
      - "${EOS_SERVER__EOSDASH_PORT}:${EOS_SERVER__EOSDASH_PORT}"
